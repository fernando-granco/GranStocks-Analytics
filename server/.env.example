# ==========================================
# GranStocks Analytics - Core Configuration
# ==========================================

# Port the Fastify backend will bind to
PORT=3000

# The hostname/URL where your frontend is hosted. Very important for CORS.
APP_ORIGIN=http://localhost:5173

# Must be "production" on VPS. Enables secure cookies, strict secret validation.
NODE_ENV=production

# Database Connection (SQLite by default)
DATABASE_URL=file:./data/app.db

# ==========================================
# Security & Encryption (CRITICAL)
# ==========================================

# Used to sign HTTP-only JSON Web Tokens for user sessions (String, minimum 16 chars)
JWT_SECRET=supersecretjwt_default_dev_only

# Used to sign session cookies (String, minimum 16 chars)
COOKIE_SECRET=supersecretcookie_default_dev_only

# AES-256-GCM encryption key to secure user AI API keys in the database.
# MUST BE EXACTLY 32 CHARACTERS LONG. Example: 32_characters_long_secret_string
ENCRYPTION_MASTER_KEY=your_32_character_encryption_key_here

# ==========================================
# Initial SuperAdmin Scaffolding
# ==========================================

# During initial DB boostrap, creates an admin with this criteria
SUPERADMIN_EMAIL=admin@granstocks.local
SUPERADMIN_PASSWORD=change_this_password

# ==========================================
# Market Data Providers
# ==========================================

# === Financial Modeling Prep (for TSX) ===
# Required for Canadian stocks
# Get yours at https://financialmodelingprep.com
FMP_API_KEY=

# === Brapi (for Ibovespa / B3) ===

# === Primary Stock Data Provider (Prixe) ===
# Get yours at https://prixe.io
PRIXE_API_KEY=your_prixe_api_key_here

# === Finnhub (fallback for international/metadata) ===
FINNHUB_API_KEY=your_finnhub_api_key_here
FINNHUB_BASE_URL=https://finnhub.io/api/v1

# === Binance (for Crypto) ===
# Uses public endpoints, no API key required.
# Get info at https://www.binance.com
BINANCE_REST_BASE_URL=https://api.binance.com
BINANCE_WS_BASE_URL=wss://stream.binance.com:9443

# ==========================================
# Timezone & Scheduling
# ==========================================

# Specifies the timezone context used when running end-of-day deterministic analytics
ANALYSIS_TIMEZONE=America/Toronto

# ==========================================
# Email Service (Resend)
# ==========================================

# Get your API key at https://resend.com
# Leave blank to disable email sending (emails will be logged to console in dev mode).
RESEND_API_KEY=your_resend_api_key_here

# The "from" address for outgoing emails.
# The subdomain verify.granstocks.com should be added as a verified sending domain in Resend.
FROM_EMAIL=GranStocks <noreply@verify.granstocks.com>

# ==========================================
# Feature Flags
# ==========================================

# Set to "true" to require email verification before login.
# Requires RESEND_API_KEY to be set (or emails will be printed to console in dev).
REQUIRE_EMAIL_VERIFICATION=false

# Set to "true" to enable the password reset flow.
# Requires RESEND_API_KEY to be set (or emails will be printed to console in dev).
ENABLE_EMAIL_PASSWORD_RESET=false
